<div class="m-5">
  <div class="container-fluid d-flex flex-column">
    <div class="">
      <h1>Campaign form</h1>
      <div>
        <button (click)="save()" class="btn btn-outline-primary">Save</button>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-xl-6">
        <h3>Main infomarmation</h3>
        <form class="d-flex flex-column" [formGroup]="campaignForm">
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input
              id="name"
              class="form-control"
              type="text"
              formControlName="name"
              required
              [ngClass]="{ 'is-invalid': isInputInvalid(name) }"
            />
            <div *ngIf="isInputInvalid(name)" class="text-danger">
              <div *ngIf="name.errors?.['required']">Field is required</div>
            </div>
          </div>
          <div class="mb-3">
            <label for="pubKey" class="form-label">Public key</label>
            <input
              type="text"
              class="form-control"
              id="pubKey"
              formControlName="pubKey"
              required
              [ngClass]="{ 'is-invalid': isInputInvalid(pubKey) }"
            />
            <div *ngIf="isInputInvalid(pubKey)" class="text-danger">
              <div *ngIf="pubKey.errors?.['required']">Field is required</div>
            </div>
          </div>
          <div class="mb-3">
            <label for="publicLink" class="form-label">Public link</label>
            <input
              type="text"
              class="form-control"
              id="publicLink"
              formControlName="publicLink"
              required
              [ngClass]="{ 'is-invalid': isInputInvalid(publicLink) }"
              (blur)="onPublicLinkSubmit()"
            />
            <div *ngIf="isInputInvalid(publicLink)" class="text-danger">
              <div *ngIf="publicLink.errors?.['required']">
                Field is required
              </div>
              <div *ngIf="publicLink.errors?.['pattern']">Field is invalid</div>
              <div *ngIf="publicLink.errors?.['taken']">
                Public link is taken
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="col-xl-6">
        <h3>Staff</h3>
        <app-campaign-form-users-input
          *ngIf="!!campaign?.campaignUsers"
          [campaignUsers]="campaign.campaignUsers"
        ></app-campaign-form-users-input>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-xl-6">
        <h3>Candidates</h3>
        <app-campaign-form-candidates-input
          *ngIf="!!campaign?.candidates"
          [campaign]="campaign"
          [candidates]="campaign.candidates"
        ></app-campaign-form-candidates-input>
      </div>
      <div class="col-xl-6">
        <h3>Public/private keys</h3>
      </div>
    </div>
  </div>
</div>
